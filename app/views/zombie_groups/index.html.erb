<head>
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
   <script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js' type='text/javascript'></script>
</head>
<div id ="hordeList">
<table>
  <thead>
    <tr>
      <!-- <th>Latitude</th>
      <th>Longitude</th>-->
      <th>Address</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @zombie_groups.each do |zombie_group| %>
      <tr>
       <td><%= zombie_group.latitude %></td>
        <td><%= zombie_group.longitude %></td>
         <!--<td><%= zombie_group.address %></td>
        <td><%= zombie_group.title %></td>-->
        <td><%= link_to 'Show', zombie_group %></td>
     <% if user_signed_in? && current_user.admin? %>
        <!-- <td><%= link_to 'Edit', zombie_group %></td>-->
        <td><%= link_to 'Destroy', zombie_group, method: :delete, data: { confirm: 'Are you sure?' } %></td>

         <% else %>
         
          <% end %>
      </tr>
    <% end %>
  
  </tbody>
 
</table>

</div>
<!--                     -->
<!-- List of Zombies     -->
<!--                     -->

<div class="modal fade" id="smallModal" tabindex="-1" role="dialog" aria-labelledby="smallModal" aria-hidden="true">
   <div class="modal-dialog modal-sm">
      <div class="modal-content">
         <div class="modal-header">
            <button type="button" class="close" style="opacity:1; width:25px;height:25px;" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h2 class="modal-title" id="myModalLabel">Tag A Zombie horde</h2>
         </div>
         <div class="modal-body">
         <%= render "form" %>

         </div>
         <div class="modal-footer">
            <button type="button" class="btn btn-default" onclick="$('#submitHorde').click();"data-dismiss="modal">Tag Zombie Horde</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
         </div>
      </div>
   </div>
</div>
<!--       The End       -->




<style>

.numeric, #zombie_group_address, label, #submitHorde ,#hordeList{
  display:none;
}

td{
        padding:  5px;
        font-size: 16px !important;
}

</style>
<div id ="mapContainer" style='width: 800px;'>
  <div id="map" style='width: 800px; height: 400px;'></div>
</div>

<script type="text/javascript">


handler = Gmaps.build('Google');
handler.buildMap({ provider: {      
  mapTypeId: google.maps.MapTypeId.ROADMAP, 
  styles: mapStyle, options:mapOptions     
  }, internal: {id: 'map'}}, function(){
            handler.addMarker(<%=raw @campus.to_json %>);

      markers = handler.addMarkers(<%=raw @hash.to_json %>);

      handler.bounds.extendWith(markers);
      handler.fitMapToBounds();


      google.maps.event.addListener(handler.getMap(), 'dblclick', function(event){
            updateFormLocation(event.latLng);

        openModal();

      } );

function submitMarker(){
         
          $( "#submitHorde" ).click();
            
          alert("Zombie Horde Succesffully Tagged!");
}

function openModal(){
//Fill Forms Fields
//Open Our Modal Form
  $('#smallModal').modal('show');

}

   function updateFormLocation(latLng) {
        $('#zombie_group_latitude').val(latLng.lat());
        $('#zombie_group_longitude').val(latLng.lng());
      }

});

</script>
